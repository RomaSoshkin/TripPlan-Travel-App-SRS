# 3. Функциональные требования

## 3.1. Функциональный блок "Авторизация"

### 3.1.1. Описание и приоритет

**Высокий приоритет (P0).** Обеспечивает вход в приложение через российские соцсети и email. Поддерживает оффлайн-работу с ограниченным функционалом.

### 3.1.2. Причинно-следственные связи

*   **Успешная авторизация** → Доступ к личному кабинету.
*   **Неудачная авторизация** → Отображение ошибки с рекомендациями.
*   **Оффлайн-режим** → Доступ к кэшированным данным.

### 3.1.3. Функциональные требования

| ID  | Требование                           | Критерии приемки                                                                 |
| :-- | :----------------------------------- | :------------------------------------------------------------------------------- |
| FR1 | Регистрация через email.             | Пароль: 6+ символов, латинские буквы обоих регистров + минимум 1 цифра.          |
| FR2 | Вход через VK ID/Яндекс/Telegram     | Поддержка последних версий API.                                                  |
| FR3 | Восстановление пароля                | Отправка ссылки на email в течение 5 минут.                                      |

### 3.1.4. Алгоритмы

**Алгоритм авторизации:**
Ввод данных → Проверка формата → Запрос к API → Создание сессии

**Оффлайн-режим:**
Проверка соединения → Использование локальных данных → Синхронизация при восстановлении связи

## 3.2. Функциональный блок "Управление путешествиями"

### 3.2.1. Описание и приоритет

**Критичный функционал (P0).** Ядро приложения для создания и редактирования поездок.

### 3.2.2. Причинно-следственные связи

*   **Создание** → Добавление городов → Указание дат → Сохранение.
*   **Редактирование** → Выбор путешествия → Модификация → Обновление.
*   **Удаление** → Подтверждение → Очистка связанных данных.

### 3.2.3. Функциональные требования

| ID  | Требование                   | Детализация                                  |
| :-- | :--------------------------- | :------------------------------------------- |
| FR4 | Создание путешествия.        | Минимальные данные: страна (1), город (1-N), даты (начало/конец). |
| FR5 | Добавление нескольких городов. | Максимум 10 городов на 1 поездку.            |
| FR6 | Управление точками интереса. | Привязка к конкретному городу/дате.          |

### 3.2.4. Алгоритмы

**Создание маршрута:**
Выбор страны → Добавление городов → Указание дат → Валидация → Сохранение

**Редактирование:**
Загрузка данных → Модификация → Проверка конфликтов → Обновление

## 3.3. Функциональный блок "Финансовый учет"

### 3.3.1. Описание и приоритет

**Высокий приоритет (P1).** Система контроля бюджета поездки.

### 3.3.2. Причинно-следственные связи

*   **Добавление расхода** → Выбор категории → Указание суммы → Обновление баланса.
*   **Редактирование** → Корректировка данных → Пересчет статистики.

### 3.3.3. Функциональные требования

| ID  | Требование               | Ограничения                          |
| :-- | :----------------------- | :----------------------------------- |
| FR7 | Базовые категории расходов | 5 предустановленных (транспорт, жилье и т.д.). |
| FR8 | Пользовательские категории | Максимум 20, редактируемые.          |
| FR9 | Визуализация бюджета     | Круговая/столбчатая диаграмма на выбор. |

### 3.3.4. Алгоритмы

**Добавление расхода:**
Выбор категории → Ввод суммы → Конвертация в RUB (если нужно) → Сохранение

**Генерация отчетов:**
Агрегация данных → Построение диаграммы → Экспорт (опционально)

## 3.4. Функциональный блок "Документы"

### 3.4.1. Описание и приоритет

**Средний приоритет (P2).** Система хранения travel-документов.

### 3.4.2. Причинно-следственные связи

*   **Загрузка** → Проверка формата → Конвертация (при необходимости) → Сохранение.
*   **Просмотр** → Фильтрация по типу/дате → Открытие → Удаление.

### 3.4.3. Функциональные требования

| ID  | Требование               | Ограничения                |
| :-- | :----------------------- | :------------------------- |
| FR10| Поддержка форматов.      | PDF, JPG/JPEG, PNG.        |
| FR11| Ограничение размера.     | Макс. 5 МБ на файл.        |
| FR12| Организация документов.  | Привязка к конкретному путешествию. |

### 3.4.4. Алгоритмы

**Загрузка документа:**
Выбор файла → Проверка формата и размера → Сжатие (если нужно) → Привязка к поездке

**Поиск:**
Фильтрация по типу/дате → Полнотекстовый поиск по названиям

## 3.5. Функциональный блок "Интеграции"

### 3.5.1. Описание и приоритет

**Низкий приоритет (для MVP).** Взаимодействие с внешними сервисами.

### 3.5.2. Причинно-следственные связи

*   **Запрос данных** → Кэширование → Отображение актуальной информации.
*   **Ошибка соединения** → Использование кэша → Уведомление пользователя.

### 3.5.3. Функциональные требования

| ID  | Требование                   | Ограничения                          |
| :-- | :--------------------------- | :----------------------------------- |
| FR13| Получение данных отелей.     | Кэширование на 24 часа.              |
| FR14| Интеграция с авиабилетами.   | Только для партнерских авиакомпаний. |

### 3.5.4. Алгоритмы

**Синхронизация с API:**
Отправка запроса → Обработка ответа → Обновление кэша → Пуш-уведомление (при изменениях)

---

**Примечание:**

*   Все ID требований (FR1-FR14) уникальны в рамках документа.
*   **Приоритеты:**
    *   **P0** - Обязательны для MVP.
    *   **P1** - Желательны для MVP.
    *   **P2-P3** - Низкий приоритет и будут реализованы после выпуска минимально жизнеспособной версии продукта (MVP).
